SUDOKU_VIEW=function(){var a=9,b=9,c=function(a,b){var c=0;$(a).each(function(){0!==b[c]?($(this).val(b[c]),$(this).attr("readonly","readonly"),$(this).addClass("disabledState")):$(this).val(""),c++})},d=function(){alert("With some of the values you have entered, the board cannot be solved. Please clear them and try again.")},e=function(a){a.addClass("errorState")},f=function(a){a.removeClass("errorState")},g=function(c,d){var e=0;col=0,$(c).each(function(){return 0!==d[e][col]&&$(this).val(d[e][col]),col++,col===a&&(col=0,e++,e===b)?!0:void 0})},h=function(d){var e='<table id="sudokuTable"><tbody>',f=0,g=0,h="";for(g=0;a>g;g++)h+='<td><input maxlength="1"></input></td>';for(f=0;b>f;f++)e=e+"<tr>"+h+"</tr>";return e+="</tbody></table>",$("#sudokuContainer").append(e),c("#sudokuTable input",d),e};return{createBoard:h,solvedBoard:g,showError:e,removeErrorState:f,showErrorMsg:d}}(),$(document).ready(function(){var a,b,c,d,e,f,g=SUDOKU_MODEL.generateBoardValues();SUDOKU_VIEW.createBoard(g),$("#sudokuTable").delegate("input","keyup",function(){a=$(this).closest("tr").index(),b=$(this).closest("td").index(),d=SUDOKU_MODEL.isValidNumber($(this).val(),a,b),""===$(this).val()&&(SUDOKU_VIEW.removeErrorState($(this)),SUDOKU_MODEL.removeValue(a,b)),d?(c=SUDOKU_MODEL.isValueAdded($(this).val(),a,b),c?SUDOKU_VIEW.removeErrorState($(this)):SUDOKU_VIEW.showError($(this))):$(this).val("")}),$(".buttonGrp").delegate("button","click",function(){"SOLVE THE BOARD"===$(this).text()?($("#sudokuTable input").removeClass("errorState"),e=SUDOKU_MODEL.solve(),0!=e?SUDOKU_VIEW.solvedBoard("#sudokuTable input",e):SUDOKU_VIEW.showErrorMsg()):"RESET THE BOARD"===$(this).text()&&($("#sudokuTable input").val(""),$("#sudokuTable input").removeClass("errorState"),f=SUDOKU_MODEL.resetBoardValues(),SUDOKU_VIEW.solvedBoard("#sudokuTable input",f))})}),SUDOKU_MODEL=function(){var a=[],b=[],c=[],d=[],e=[],f=9,g=9,h=0,i=9,j=function(){var c=[0,9,8,0,0,2,3,0,0,0,4,7,0,3,5,0,8,0,0,0,0,0,0,7,5,0,2,0,6,5,0,8,0,0,7,3,0,0,0,5,7,1,0,9,0,4,0,9,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,8,1,0,0,2,9,4,0,5,9,5,0,3,1,0,7,2,0];return m(c),b=$.extend(!0,{},a),c},k=function(a,b){var c=Math.floor(a/3),d=Math.floor(b/3);return 0==c&&0==d?0:0==c&&1==d?1:0==c&&2==d?2:1==c&&0==d?3:1==c&&1==d?4:1==c&&2==d?5:2==c&&0==d?6:2==c&&1==d?7:2==c&&2==d?8:void 0},l=function(a){var b=$.isNumeric(a);return a>h&&i>=a&&b?isValidType=!0:void 0},m=function(b){for(var g=0,h=0,i=0;81>g;g++)0===i&&(a[h]=[]),a[h][i]=b[g],i++,i===f&&(h+=1,i=0);return c=[],d=[],e=[],n(a),a},n=function(a){for(var b=0;g>b;b++)for(var h=0;f>h;h++)0!==a[b][h]&&(void 0===e[b]&&(e[b]=[]),e[b][e[b].length]=a[b][h],void 0===d[h]&&(d[h]=[]),d[h][d[h].length]=a[b][h],index=k(b,h),void 0==c[index]&&(c[index]=[]),c[index][c[index].length]=a[b][h]);for(var b=0;i>b;b++)void 0===e[b]&&(e[b]=[]),void 0===d[b]&&(d[b]=[]),void 0===c[b]&&(c[b]=[]);return a},o=function(b,f,g){var h=k(f,g);return-1===e[f].indexOf(b)&&-1===d[g].indexOf(b)&&-1===c[h].indexOf(b)?(isValid=!0,a[f][g]=b,e[f][e[f].length]=b,d[g][d[g].length]=b,c[h][c[h].length]=b):isValid=!1,isValid},p=function(a){return l(a)},q=function(a,b,c){return o(parseInt(a),b,c)},r=function(){return s()?a:!1},s=function(){if(u())return!0;for(var b=-1,h=-1,i=0;g>i;i++){for(var j=0;f>j;j++)if(0==a[i][j]){b=i,h=j;break}if(-1!=b)break}-1==b&&console.log("Something wrong");var l=t(b,h);if(0===l.length)return!1;for(var m=[],n=l.length,i=0;n>i;i++){var p=l[Math.floor(Math.random()*l.length)];m[i]=p,l.splice(l.indexOf(p),1)}l=m;for(var i=0;i<l.length;i++){var q=l[i],r=o(q,b,h);if(r||console.log("TRY AGAIN"),console.log("_currentBoardValues-->",a),s())return!0;a[b][h]=0,e[b].splice(e[b].indexOf(q),1),d[h].splice(d[h].indexOf(q),1);var v=k(b,h);c[v].splice(c[v].indexOf(q),1)}return!1},t=function(a,b){var c=[1,2,3,4,5,6,7,8,9],d=k(a,b);return c=v(c,a,b,d)},u=function(){for(var b=0;g>b;b++)for(var c=0;f>c;c++)if(0==a[b][c])return!1;return!0},v=function(a,b,f,g){void 0===e[b]&&(e[b]=[]);for(var h=0;h<e[b].length;h++)val=Number(e[b][h]),val>0&&a.indexOf(val)>-1&&a.splice(a.indexOf(val),1);void 0===d[f]&&(d[f]=[]);for(var h=0;h<d[f].length;h++)val=Number(d[f][h]),val>0&&a.indexOf(val)>-1&&a.splice(a.indexOf(val),1);void 0===c[g]&&(c[g]=[]);for(var h=0;h<c[g].length;h++)val=Number(c[g][h]),val>0&&a.indexOf(val)>-1&&a.splice(a.indexOf(val),1);return a},w=function(b,f){var g=k(b,f),h=a[b][f];return 0==h?!1:(a[b][f]=0,e[b].splice(e[b].indexOf(h),1),d[f].splice(d[f].indexOf(h),1),c[g].splice(c[g].indexOf(h),1),!0)},x=function(){return j(),a};return{generateBoardValues:j,isValidNumber:p,solve:r,isValueAdded:q,resetBoardValues:x,removeValue:w}}();